# Parenthesized field access chain with pipeline function.
# https://github.com/cue-exp/helm2cue/issues/34
exec helm2cue chart chartdir outdir
cmp stderr stderr.golden
cmp outdir/test.cue expected/test.cue

-- chartdir/Chart.yaml --
apiVersion: v2
name: test-app
version: 0.1.0
-- chartdir/values.yaml --
cpu: 100m
-- chartdir/templates/test.yaml --
cpu: {{ ((.Values).cpu) | default 0 }}
-- stderr.golden --
converted 1/1 templates from test-app
-- expected/test.cue --
// Code generated by helm2cue; DO NOT EDIT.

package test_app

test: [{
	cpu: *#values.cpu | 0
}]
