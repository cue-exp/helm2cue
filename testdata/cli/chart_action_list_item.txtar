# Action-only list items missing trailing comma in generated CUE.
# https://github.com/cue-exp/helm2cue/issues/30
exec helm2cue chart chartdir outdir
cmp stderr stderr.golden
cmp outdir/deployment.cue expected/deployment.cue

-- chartdir/Chart.yaml --
apiVersion: v2
name: test-app
version: 0.1.0
-- chartdir/values.yaml --
port: 80
-- chartdir/templates/deployment.yaml --
apiVersion: v1
kind: Pod
metadata:
  name: test
spec:
  containers:
  - name: test
    args:
      - first
      - {{ .Values.port }}
      - last
-- stderr.golden --
converted 1/1 templates from test-app
-- expected/deployment.cue --
// Code generated by helm2cue; DO NOT EDIT.

package test_app

deployment: [{
	apiVersion: "v1"
	kind:       "Pod"
	metadata: {
		name: "test"
	}
	spec: {
		containers: [
			{
				name: "test"
				args: [
					"first",
					#values.port,
					"last",
				]
			},
		]
	}
}]
