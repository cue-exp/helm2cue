# fail function should convert to CUE error().
# https://github.com/cue-exp/helm2cue/issues/45
exec helm2cue chart chartdir outdir
stderr 'skipping test.yaml.*unsupported template action.*fail'
stderr 'converted 1/2 templates'

-- chartdir/Chart.yaml --
apiVersion: v2
name: test-app
version: 0.1.0
-- chartdir/values.yaml --
required: ""
name: test
-- chartdir/templates/test.yaml --
{{- if not .Values.required }}
{{- fail "required must be set" }}
{{- end }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: test
data:
  key: {{ .Values.name }}
-- chartdir/templates/good.yaml --
apiVersion: v1
kind: ConfigMap
metadata:
  name: good
data:
  key: value
