Cross-document if block: {{if}} wraps --- separator.
No round-trip: CUE wraps documents in separate fields.

-- _helpers.tpl --
-- values.yaml --
enabled: true
name: test
-- input.yaml --
{{- if .Values.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.name }}
data:
  key: one
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Values.name }}
data:
  key: two
{{- end }}
-- output.cue --
import "struct"

#values: {
	enabled?: bool | number | string | null
	name!:    bool | number | string | null
	...
}

if (_nonzero & {#arg: #values.enabled, _}) {
	document_0: {
		apiVersion: "v1"
		kind:       "ConfigMap"
		metadata: name: #values.name
		data: key: "one"
	}
}
if (_nonzero & {#arg: #values.enabled, _}) {
	document_1: {
		apiVersion: "v1"
		kind:       "ConfigMap"
		metadata: name: #values.name
		data: key: "two"
	}
}
_nonzero: {
	#arg?: _
	[if #arg != _|_ {
		[
			if (#arg & int) != _|_ {#arg != 0},
			if (#arg & string) != _|_ {#arg != ""},
			if (#arg & float) != _|_ {#arg != 0.0},
			if (#arg & bool) != _|_ {#arg},
			if (#arg & [...]) != _|_ {len(#arg) > 0},
			if (#arg & {...}) != _|_ {(#arg & struct.MaxFields(0)) == _|_},
			false,
		][0]
	}, false][0]
}
